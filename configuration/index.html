
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../background-processing/">
      
      
        <link rel="next" href="../contributing/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Configuration Guide - Ragdoll Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Ragdoll Documentation" class="md-header__button md-logo" aria-label="Ragdoll Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ragdoll Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Ragdoll Documentation" class="md-nav__button md-logo" aria-label="Ragdoll Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ragdoll Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ragdoll Documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-jobs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Services Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../background-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Background Processing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configuration Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configuration Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Production Setup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#llm-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      LLM Provider Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLM Provider Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Provider Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-with-pgvector-recommended-for-production" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL with pgvector (Recommended for Production)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-postgresql-only" class="md-nav__link">
    <span class="md-ellipsis">
      Important: PostgreSQL Only
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-environment-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database Environment Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Processing Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#text-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Text Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Document Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Search Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Search Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-search-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Search Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-search-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Search Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background-processing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Background Processing Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background Processing Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-queue-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Job Queue Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-toggles" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Toggles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-levels-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Log Levels and Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#development-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Development Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-and-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Memory and Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Database Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-specific-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Environment-Specific Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment-Specific Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Development Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Test Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Production Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Validation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Rules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#runtime-configuration-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Configuration Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-environment-management" class="md-nav__link">
    <span class="md-ellipsis">
      1. Environment Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      2. Security Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      3. Performance Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-operational-excellence" class="md-nav__link">
    <span class="md-ellipsis">
      4. Operational Excellence
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../database-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Schema
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Production Deployment Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../document-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Document Processing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../embedding-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedding System
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environment Variables Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending the System
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../file-uploads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Upload System
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation &amp; Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Integration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../metadata-schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metadata Schemas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring &amp; Analytics
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-modal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Modal Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance Tuning
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../search-analytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search &amp; Analytics
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Considerations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Production Setup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#llm-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      LLM Provider Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LLM Provider Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Provider Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-with-pgvector-recommended-for-production" class="md-nav__link">
    <span class="md-ellipsis">
      PostgreSQL with pgvector (Recommended for Production)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-postgresql-only" class="md-nav__link">
    <span class="md-ellipsis">
      Important: PostgreSQL Only
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-environment-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Database Environment Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Processing Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#text-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Text Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Document Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Search Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Search Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-search-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Search Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-search-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Search Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background-processing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Background Processing Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background Processing Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-queue-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Job Queue Settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-toggles" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Toggles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-levels-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Log Levels and Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#development-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Development Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-and-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Memory and Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Database Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-specific-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Environment-Specific Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment-Specific Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Development Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Test Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Production Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Validation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Rules
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#runtime-configuration-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Configuration Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-environment-management" class="md-nav__link">
    <span class="md-ellipsis">
      1. Environment Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      2. Security Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      3. Performance Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-operational-excellence" class="md-nav__link">
    <span class="md-ellipsis">
      4. Operational Excellence
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="configuration-guide">Configuration Guide</h1>
<p>Ragdoll features a comprehensive configuration system that supports enterprise-grade deployments with fine-grained control over all aspects of the system. The configuration supports multiple LLM providers, database adapters, processing parameters, and operational settings.</p>
<h2 id="overview">Overview</h2>
<p>The configuration system provides 25+ configurable options organized into logical groups:</p>
<ul>
<li><strong>LLM Provider Configuration</strong>: Multiple provider support with API key management</li>
<li><strong>Database Configuration</strong>: PostgreSQL with pgvector extension (REQUIRED)</li>
<li><strong>Processing Parameters</strong>: Chunking, embedding, and content analysis settings</li>
<li><strong>Search Configuration</strong>: Similarity thresholds, ranking weights, and result limits</li>
<li><strong>Operational Settings</strong>: Logging, monitoring, background processing, and performance tuning</li>
<li><strong>Feature Toggles</strong>: Enable/disable optional features and advanced capabilities</li>
</ul>
<h2 id="basic-configuration">Basic Configuration</h2>
<h3 id="simple-setup">Simple Setup</h3>
<pre><code class="language-ruby">require 'ragdoll-core'

Ragdoll::Core.configure do |config|
  # Configure LLM providers (new structure)
  config.llm_providers[:openai][:api_key] = ENV['OPENAI_API_KEY']

  # Configure models (new structure)
  config.models[:embedding][:text] = 'openai/text-embedding-3-small'
  config.models[:text_generation][:default] = 'openai/gpt-4o-mini'

  # Database (PostgreSQL REQUIRED)
  config.database = {
    adapter: 'postgresql',
    database: 'ragdoll_development',
    username: 'ragdoll',
    password: ENV['RAGDOLL_DATABASE_PASSWORD'],
    host: 'localhost',
    port: 5432,
    auto_migrate: true
  }
end
</code></pre>
<h3 id="production-setup">Production Setup</h3>
<pre><code class="language-ruby">Ragdoll::Core.configure do |config|
  # Configure LLM providers (new structure)
  config.llm_providers[:openai][:api_key] = ENV['OPENAI_API_KEY']
  config.llm_providers[:openai][:organization] = ENV['OPENAI_ORGANIZATION']
  config.llm_providers[:openai][:project] = ENV['OPENAI_PROJECT']

  # Configure models (new structure)
  config.models[:embedding][:text] = 'openai/text-embedding-3-small'
  config.models[:text_generation][:default] = 'openai/gpt-4o-mini'
  config.models[:text_generation][:summary] = 'openai/gpt-4o'
  config.models[:text_generation][:keywords] = 'openai/gpt-4o-mini'

  # Production PostgreSQL with pgvector
  config.database = {
    adapter: 'postgresql',
    database: ENV['DATABASE_NAME'] || 'ragdoll_production',
    username: ENV['DATABASE_USERNAME'] || 'ragdoll',
    password: ENV['RAGDOLL_DATABASE_PASSWORD'],
    host: ENV['DATABASE_HOST'] || 'localhost',
    port: ENV['DATABASE_PORT'] || 5432,
    auto_migrate: false  # Handle migrations separately in production
  }

  # Production logging
  config.logging[:level] = :info
  config.logging[:filepath] = '/var/log/ragdoll/ragdoll.log'

  # Performance settings
  config.processing[:text][:chunking][:max_tokens] = 1000
  config.processing[:text][:chunking][:overlap] = 200
  config.processing[:search][:similarity_threshold] = 0.75
  config.processing[:search][:max_results] = 50

  # Enable summarization
  config.summarization[:enable] = true
  config.summarization[:max_length] = 300
end
</code></pre>
<h2 id="llm-provider-configuration">LLM Provider Configuration</h2>
<h3 id="supported-providers">Supported Providers</h3>
<p>Ragdoll supports 7 LLM providers through the ruby_llm integration:</p>
<pre><code class="language-ruby"># OpenAI (recommended for production)
config.llm_providers[:openai][:api_key] = ENV['OPENAI_API_KEY']
config.llm_providers[:openai][:organization] = ENV['OPENAI_ORGANIZATION']
config.llm_providers[:openai][:project] = ENV['OPENAI_PROJECT']
config.models[:embedding][:text] = 'openai/text-embedding-3-small'  # or text-embedding-3-large
config.models[:text_generation][:default] = 'openai/gpt-4o'
config.models[:text_generation][:summary] = 'openai/gpt-4o'
config.models[:text_generation][:keywords] = 'openai/gpt-4o-mini'

# Anthropic Claude
config.llm_providers[:anthropic][:api_key] = ENV['ANTHROPIC_API_KEY']
config.llm_providers[:openai][:api_key] = ENV['OPENAI_API_KEY']  # Still needed for embeddings
config.models[:embedding][:text] = 'openai/text-embedding-3-small'  # OpenAI embeddings
config.models[:text_generation][:default] = 'anthropic/claude-3-sonnet-20240229'
config.models[:text_generation][:summary] = 'anthropic/claude-3-sonnet-20240229'
config.models[:text_generation][:keywords] = 'anthropic/claude-3-haiku-20240307'

# Google Gemini
config.llm_providers[:google][:api_key] = ENV['GOOGLE_API_KEY']
config.llm_providers[:google][:project_id] = ENV['GOOGLE_PROJECT_ID']
config.models[:text_generation][:default] = 'google/gemini-1.5-pro'
config.models[:text_generation][:summary] = 'google/gemini-1.5-pro'
config.models[:text_generation][:keywords] = 'google/gemini-1.5-flash'

# Azure OpenAI
config.llm_providers[:azure][:api_key] = ENV['AZURE_OPENAI_API_KEY']
config.llm_providers[:azure][:endpoint] = ENV['AZURE_OPENAI_ENDPOINT']
config.llm_providers[:azure][:api_version] = ENV['AZURE_OPENAI_API_VERSION']
config.models[:embedding][:text] = 'text-embedding-ada-002'
config.models[:text_generation][:default] = 'azure/gpt-4'

# Ollama (local deployment)
config.llm_providers[:ollama][:endpoint] = ENV['OLLAMA_ENDPOINT'] || 'http://localhost:11434'
config.models[:text_generation][:default] = 'ollama/llama3:8b'
config.models[:text_generation][:summary] = 'ollama/llama3:8b'
config.models[:text_generation][:keywords] = 'ollama/llama3:8b'
config.models[:embedding][:text] = 'nomic-embed-text'

# HuggingFace
config.llm_providers[:huggingface][:api_key] = ENV['HUGGINGFACE_API_KEY']
config.models[:text_generation][:default] = 'huggingface/microsoft/DialoGPT-medium'
config.models[:embedding][:text] = 'sentence-transformers/all-MiniLM-L6-v2'

# OpenRouter (access to multiple models)
config.llm_providers[:openrouter][:api_key] = ENV['OPENROUTER_API_KEY']
config.models[:text_generation][:default] = 'openrouter/anthropic/claude-3-sonnet'
config.models[:text_generation][:summary] = 'openrouter/anthropic/claude-3-sonnet'
config.models[:text_generation][:keywords] = 'openrouter/openai/gpt-3.5-turbo'
</code></pre>
<h3 id="multi-provider-configuration">Multi-Provider Configuration</h3>
<pre><code class="language-ruby"># Use different providers for different tasks
Ragdoll::Core.configure do |config|
  # Configure multiple LLM providers
  config.llm_providers[:openai][:api_key] = ENV['OPENAI_API_KEY']
  config.llm_providers[:anthropic][:api_key] = ENV['ANTHROPIC_API_KEY']
  config.llm_providers[:ollama][:endpoint] = 'http://localhost:11434'

  # Configure models for different tasks
  config.models[:embedding][:text] = 'openai/text-embedding-3-small'  # OpenAI embeddings
  config.models[:text_generation][:default] = 'openai/gpt-4o-mini'    # OpenAI for general tasks
  config.models[:text_generation][:summary] = 'anthropic/claude-3-sonnet-20240229'  # Claude for summarization
  config.models[:text_generation][:keywords] = 'ollama/llama3:8b'     # Local Ollama for keywords
end
</code></pre>
<h2 id="database-configuration">Database Configuration</h2>
<p><strong>Important Note</strong>: Ragdoll ONLY supports PostgreSQL. The system requires the pgvector extension for vector similarity search and uses PostgreSQL-specific features. SQLite is not supported.</p>
<h3 id="postgresql-with-pgvector-recommended-for-production">PostgreSQL with pgvector (Recommended for Production)</h3>
<pre><code class="language-ruby">config.database_config = {
  adapter: 'postgresql',
  database: 'ragdoll_production',
  username: 'ragdoll_user',
  password: ENV['DATABASE_PASSWORD'],
  host: 'postgres.example.com',
  port: 5432,
  pool: 25,                    # Connection pool size
  timeout: 5000,               # Connection timeout (ms)
  auto_migrate: false,         # Handle migrations separately
  sslmode: 'require',          # SSL configuration

  # pgvector specific settings
  extensions: ['vector'],
  search_path: ['public', 'vector'],

  # Performance tuning
  prepared_statements: true,
  advisory_locks: true,
  variables: {
    'shared_preload_libraries' =&gt; 'vector',
    'max_connections' =&gt; '200',
    'shared_buffers' =&gt; '256MB',
    'effective_cache_size' =&gt; '1GB'
  }
}
</code></pre>
<h3 id="important-postgresql-only">Important: PostgreSQL Only</h3>
<p>Ragdoll exclusively supports PostgreSQL with the pgvector extension. This is required for:</p>
<ul>
<li>Vector similarity search operations  </li>
<li>Advanced PostgreSQL features like GIN indexes for full-text search</li>
<li>JSON field operations and queries</li>
<li>Optimized performance for large document collections</li>
</ul>
<p>No other database adapters are supported.</p>
<h3 id="database-environment-configuration">Database Environment Configuration</h3>
<pre><code class="language-ruby"># Environment-specific database configuration (PostgreSQL for all environments)
case Rails.env
when 'development'
  config.database_config = {
    adapter: 'postgresql',
    database: 'ragdoll_development',
    username: 'ragdoll',
    password: ENV['DATABASE_PASSWORD'],
    host: 'localhost',
    port: 5432,
    auto_migrate: true
  }
when 'test'
  config.database_config = {
    adapter: 'postgresql',
    database: 'ragdoll_test',
    username: 'ragdoll',  
    password: ENV['DATABASE_PASSWORD'],
    host: 'localhost',
    port: 5432,
    auto_migrate: true
  }
when 'production'
  config.database_config = {
    adapter: 'postgresql',
    url: ENV['DATABASE_URL'],  # Use connection URL
    pool: ENV.fetch('RAILS_MAX_THREADS', 25).to_i,
    auto_migrate: false
  }
end
</code></pre>
<h2 id="processing-configuration">Processing Configuration</h2>
<h3 id="text-processing">Text Processing</h3>
<p><strong>Schema Note</strong>: The <code>embedding_model</code> is now stored per content type (text, image, audio) rather than duplicated in individual embeddings. This provides better data normalization while maintaining functionality through polymorphic relationships.</p>
<pre><code class="language-ruby">config.chunk_size = 1000              # Characters per text chunk
config.chunk_overlap = 200            # Overlap between chunks
config.max_chunk_size = 2000          # Maximum chunk size limit
config.min_chunk_size = 100           # Minimum chunk size limit

# Language and encoding
config.default_language = 'en'       # Default language for processing
config.auto_detect_language = true   # Enable language detection
config.encoding_fallbacks = ['UTF-8', 'ISO-8859-1', 'Windows-1252']

# Text cleaning
config.remove_extra_whitespace = true
config.normalize_unicode = true
config.strip_html_tags = true
config.preserve_code_blocks = true
</code></pre>
<h3 id="document-processing">Document Processing</h3>
<pre><code class="language-ruby"># PDF processing
config.pdf_max_pages = 1000           # Maximum pages to process
config.pdf_extract_images = true     # Extract images from PDFs
config.pdf_extract_tables = true     # Extract table content
config.pdf_ocr_fallback = true       # Use OCR for scanned PDFs

# Image processing
config.image_max_size = 10.megabytes # Maximum image file size
config.image_formats = %w[jpg jpeg png gif webp bmp tiff]
config.generate_image_descriptions = true
config.image_description_model = 'gpt-4-vision-preview'

# Audio processing
config.audio_max_duration = 3600     # Maximum audio duration (seconds)
config.audio_formats = %w[mp3 wav flac m4a ogg]
config.speech_to_text_provider = :openai
config.audio_chunk_duration = 300    # Chunk audio files (seconds)
</code></pre>
<h2 id="search-configuration">Search Configuration</h2>
<h3 id="basic-search-settings">Basic Search Settings</h3>
<pre><code class="language-ruby">config.search_similarity_threshold = 0.7    # Minimum similarity score
config.max_search_results = 20              # Maximum results per search
config.enable_usage_analytics = true       # Track search usage
config.search_cache_ttl = 300.seconds      # Cache search results

# Cross-modal search
config.enable_cross_modal_search = true
config.content_type_weights = {
  'text' =&gt; 1.0,
  'image' =&gt; 0.8,
  'audio' =&gt; 0.7
}
</code></pre>
<h3 id="advanced-search-configuration">Advanced Search Configuration</h3>
<pre><code class="language-ruby"># Ranking algorithm weights
config.ranking_weights = {
  similarity: 0.6,                    # Semantic similarity weight
  usage: 0.3,                         # Usage frequency weight
  recency: 0.1                        # Document recency weight
}

# Hybrid search settings
config.enable_fulltext_search = true
config.fulltext_search_weight = 0.3
config.semantic_search_weight = 0.7

# Search suggestions
config.enable_search_suggestions = true
config.suggestion_cache_ttl = 3600.seconds
config.max_suggestions = 10

# Performance settings
config.vector_index_lists = 100      # IVFFlat index lists
config.search_timeout = 30.seconds   # Search operation timeout
config.embedding_cache_size = 1000   # LRU cache for embeddings
</code></pre>
<h2 id="background-processing-configuration">Background Processing Configuration</h2>
<h3 id="job-queue-settings">Job Queue Settings</h3>
<pre><code class="language-ruby">config.enable_background_processing = true
config.job_queue_prefix = 'ragdoll'
config.job_timeout = 300.seconds
config.max_retry_attempts = 3

# Queue priorities
config.embedding_queue_priority = 10    # High priority
config.processing_queue_priority = 5    # Medium priority
config.analysis_queue_priority = 1      # Low priority

# Batch processing
config.batch_processing_size = 100
config.batch_processing_delay = 5.seconds
</code></pre>
<h3 id="feature-toggles">Feature Toggles</h3>
<pre><code class="language-ruby"># Optional features
config.enable_keyword_extraction = true
config.enable_document_summarization = true
config.enable_summary_embeddings = true
config.enable_image_descriptions = true
config.enable_audio_transcription = true

# Analytics and monitoring
config.enable_usage_analytics = true
config.enable_performance_monitoring = true
config.enable_search_analytics = true
config.analytics_batch_size = 100
config.analytics_flush_interval = 60.seconds
</code></pre>
<h2 id="logging-configuration">Logging Configuration</h2>
<h3 id="log-levels-and-output">Log Levels and Output</h3>
<pre><code class="language-ruby"># Log level configuration
config.log_level = :info              # :debug, :info, :warn, :error, :fatal
config.log_file = '/var/log/ragdoll/ragdoll.log'
config.log_rotation = 'daily'         # 'daily', 'weekly', 'monthly'
config.log_max_size = 100.megabytes   # Maximum log file size

# Structured logging
config.log_format = :json             # :json, :logfmt, :plain
config.log_timestamp = true
config.log_correlation_id = true      # Include correlation IDs

# Component-specific logging
config.log_levels = {
  'SearchEngine' =&gt; :debug,
  'EmbeddingService' =&gt; :info,
  'DocumentProcessor' =&gt; :warn,
  'BackgroundJobs' =&gt; :info
}
</code></pre>
<h3 id="development-logging">Development Logging</h3>
<pre><code class="language-ruby"># Development-specific logging
if Rails.env.development?
  config.log_level = :debug
  config.log_file = nil              # Log to stdout
  config.log_format = :plain
  config.log_sql_queries = true
  config.log_embedding_requests = true
  config.log_search_queries = true
end
</code></pre>
<h2 id="performance-configuration">Performance Configuration</h2>
<h3 id="memory-and-caching">Memory and Caching</h3>
<pre><code class="language-ruby"># Cache configuration
config.enable_query_cache = true
config.embedding_cache_ttl = 3600.seconds
config.search_cache_ttl = 300.seconds
config.metadata_cache_ttl = 1800.seconds

# Memory management
config.max_memory_usage = 2.gigabytes
config.garbage_collection_frequency = 1000  # Requests between GC
config.connection_pool_size = 25
config.connection_checkout_timeout = 5.seconds
</code></pre>
<h3 id="database-optimization">Database Optimization</h3>
<pre><code class="language-ruby"># Query optimization
config.use_prepared_statements = true
config.enable_query_logging = false   # Disable in production
config.statement_timeout = 30.seconds
config.idle_transaction_timeout = 60.seconds

# Index configuration
config.auto_create_indexes = true
config.vector_index_type = 'ivfflat'  # 'ivfflat' or 'hnsw'
config.index_maintenance_interval = 1.day
</code></pre>
<h2 id="environment-specific-configuration">Environment-Specific Configuration</h2>
<h3 id="development-configuration">Development Configuration</h3>
<pre><code class="language-ruby"># config/environments/development.rb
Ragdoll::Core.configure do |config|
  # Configure Ruby LLM providers
  config.ruby_llm_config[:openai][:api_key] = ENV['OPENAI_API_KEY']

  # Configure models
  config.models[:embedding][:text] = 'text-embedding-3-small'
  config.models[:default] = 'openai/gpt-4o-mini'

  config.database_config = {
    adapter: 'postgresql',
    database: 'ragdoll_development',
    username: 'ragdoll',
    password: ENV['DATABASE_PASSWORD'],
    host: 'localhost',
    port: 5432,
    auto_migrate: true
  }

  config.logging_config[:log_level] = :debug
  config.logging_config[:log_filepath] = nil  # stdout

  # Disable expensive features in development
  config.summarization_config[:enable] = false
  config.keywords_config[:enable] = false
  config.background_processing_config[:enable] = false

  # Fast development settings
  config.chunking[:text][:max_tokens] = 500
  config.search[:max_results] = 10
  config.search[:cache_ttl] = 60
end
</code></pre>
<h3 id="test-configuration">Test Configuration</h3>
<pre><code class="language-ruby"># config/environments/test.rb
Ragdoll::Core.configure do |config|
  # Use test doubles for LLM services
  config.ruby_llm_config[:test][:api_key] = 'test-key'

  # Configure test models
  config.models[:embedding][:text] = 'test-embedding-model'
  config.models[:default] = 'test/test-model'

  config.database_config = {
    adapter: 'postgresql',
    database: 'ragdoll_test',
    username: 'ragdoll',
    password: ENV['DATABASE_PASSWORD'],
    host: 'localhost',
    port: 5432,
    auto_migrate: true
  }

  config.logging_config[:log_level] = :fatal  # Suppress logs in tests

  # Disable external services
  config.background_processing_config[:enable] = false
  config.analytics_config[:enable] = false
  config.summarization_config[:enable] = false

  # Fast test settings
  config.chunking[:text][:max_tokens] = 100
  config.search[:max_results] = 5
  config.search[:similarity_threshold] = 0.5
end
</code></pre>
<h3 id="production-configuration">Production Configuration</h3>
<pre><code class="language-ruby"># config/environments/production.rb
Ragdoll::Core.configure do |config|
  # Configure Ruby LLM providers
  config.ruby_llm_config[:openai][:api_key] = ENV['OPENAI_API_KEY']

  # Configure production models
  config.models[:embedding][:text] = 'text-embedding-3-small'
  config.models[:default] = 'openai/gpt-4o-mini'

  config.database_config = {
    adapter: 'postgresql',
    url: ENV['DATABASE_URL'],
    pool: ENV.fetch('RAILS_MAX_THREADS', 25).to_i,
    auto_migrate: false
  }

  config.logging_config[:log_level] = :info
  config.logging_config[:log_filepath] = '/var/log/ragdoll/ragdoll.log'
  config.logging_config[:format] = :json

  # Enable all production features
  config.background_processing_config[:enable] = true
  config.analytics_config[:enable] = true
  config.summarization_config[:enable] = true
  config.keywords_config[:enable] = true

  # Production performance settings
  config.chunking[:text][:max_tokens] = 1000
  config.chunking[:text][:overlap] = 200
  config.search[:max_results] = 50
  config.search[:similarity_threshold] = 0.75

  # Cache settings
  config.search[:cache_ttl] = 300
  config.embedding_cache[:ttl] = 3600

  # Security settings
  config.logging_config[:log_requests] = false  # May contain sensitive data
  config.logging_config[:log_embedding_content] = false   # Don't log actual content
end
</code></pre>
<h2 id="configuration-validation">Configuration Validation</h2>
<h3 id="validation-rules">Validation Rules</h3>
<pre><code class="language-ruby">class ConfigurationValidator
  def self.validate!(config)
    validate_required_settings!(config)
    validate_llm_provider!(config)
    validate_database_config!(config)
    validate_numeric_ranges!(config)
    validate_feature_dependencies!(config)
  end

  private

  def self.validate_required_settings!(config)
    required = [:llm_provider, :embedding_model, :database_config]
    missing = required.select { |setting| config.send(setting).nil? }

    unless missing.empty?
      raise ConfigurationError, &quot;Missing required settings: #{missing.join(', ')}&quot;
    end
  end

  def self.validate_llm_provider!(config)
    valid_providers = [:openai, :anthropic, :google, :azure, :ollama, :huggingface, :openrouter]

    unless valid_providers.include?(config.llm_provider)
      raise ConfigurationError, &quot;Invalid LLM provider: #{config.llm_provider}&quot;
    end

    # Validate provider-specific settings
    case config.llm_provider
    when :openai
      raise ConfigurationError, &quot;OpenAI API key required&quot; if config.openai_api_key.blank?
    when :anthropic
      raise ConfigurationError, &quot;Anthropic API key required&quot; if config.anthropic_api_key.blank?
    # ... other providers
    end
  end
end
</code></pre>
<h2 id="dynamic-configuration">Dynamic Configuration</h2>
<h3 id="runtime-configuration-updates">Runtime Configuration Updates</h3>
<pre><code class="language-ruby"># Update configuration at runtime
Ragdoll::Core.configure do |config|
  config.search_similarity_threshold = 0.8
  config.max_search_results = 30
end

# Temporary configuration for specific operations
Ragdoll::Core.with_configuration(llm_provider: :anthropic) do
  # Use Anthropic for this operation
  result = Ragdoll::Core.search(&quot;complex query requiring Claude&quot;)
end
</code></pre>
<h3 id="configuration-monitoring">Configuration Monitoring</h3>
<pre><code class="language-ruby"># Monitor configuration changes
class ConfigurationMonitor
  def self.track_changes
    Ragdoll::Core.configuration.on_change do |setting, old_value, new_value|
      Rails.logger.info &quot;Configuration changed: #{setting} = #{new_value} (was #{old_value})&quot;

      # Trigger cache invalidation if needed
      if [:search_similarity_threshold, :max_search_results].include?(setting)
        SearchCache.clear
      end
    end
  end
end
</code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-environment-management">1. Environment Management</h3>
<ul>
<li>Use environment variables for sensitive settings (API keys, database passwords)</li>
<li>Create environment-specific configuration files</li>
<li>Validate configuration on application startup</li>
<li>Document all configuration options for your team</li>
</ul>
<h3 id="2-security-considerations">2. Security Considerations</h3>
<ul>
<li>Never commit API keys or passwords to version control</li>
<li>Use encrypted credential management in production</li>
<li>Disable verbose logging of sensitive data in production</li>
<li>Implement configuration validation and sanitization</li>
</ul>
<h3 id="3-performance-optimization">3. Performance Optimization</h3>
<ul>
<li>Tune chunk sizes based on your content characteristics</li>
<li>Adjust similarity thresholds based on search quality requirements</li>
<li>Configure appropriate cache TTLs for your usage patterns</li>
<li>Monitor and adjust database connection pool sizes</li>
</ul>
<h3 id="4-operational-excellence">4. Operational Excellence</h3>
<ul>
<li>Implement configuration monitoring and alerting</li>
<li>Use structured logging for better observability</li>
<li>Plan for configuration changes without service restarts</li>
<li>Document configuration dependencies and interactions</li>
</ul>
<p>The configuration system in Ragdoll provides the flexibility needed for both development simplicity and production sophistication, enabling you to tune the system precisely for your specific use case and operational requirements.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>